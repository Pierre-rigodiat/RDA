<!doctype html>
 
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Material Genome Initiative - AutoComplete Pull Down Menu</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
    <style>
	.ui-autocomplete {
        max-height: 100px;
        overflow-y: auto;
        /* prevent horizontal scrollbar */
        overflow-x: hidden;
    }
    .ui-autocomplete-loading {
        background: white url('ui-anim_basic_16x16.gif') right center no-repeat;
    }
    </style>
    <script>
    $(function() {
        function split( val ) {
            return val.split( /,\s*/ );
        }
        /*function extractLast( term ) {
            return split( term ).pop();
        }*/
 
        $( "#material" )
            // don't navigate away from the field on tab when selecting an item
            .bind( "keydown", function( event ) {
                if ( event.keyCode === $.ui.keyCode.TAB &&
                        $( this ).data( "autocomplete" ).menu.active ) {
                    event.preventDefault();
                }
            })
            .autocomplete({
                source: function( request, response ) {
					/*response(
					[
						"ActionScript",
						"AppleScript",
						"Asp",
						"BASIC",
						"C",
						"C++",
						"Clojure",
						"COBOL",
						"ColdFusion",
						"Erlang",
						"Fortran",
						"Groovy",
						"Haskell",
						"Java",
						"JavaScript",
						"Lisp",
						"Perl",
						"PHP",
						"Python",
						"Ruby",
						"Scala",
						"Scheme"
					]);*/
					$.ajax({
					   url: "cwm.php",  //server script to process data
					   type: 'GET',
					   //Ajax events
					   success: function(data){
						if (data == "")
							response(data);
						else
							response(split(data));
						},
					   error: function() {
						   console.error("Problem importing the file");
					   },
					   // Form data
					   data: 'term='+request.term,
					   //Options to tell JQuery not to process data or worry about content-type
					   cache: false,
					   contentType: false,
					   processData: false
			});

                    /*$.getJSON( "search.php", {
                        term: extractLast( request.term )
                    }, response );*/
                },
                search: function() {
                    // custom minLength
                    var term = this.value;
                    if ( term.length < 1 ) {
                        return false;
                    }
                },
                focus: function() {
                    // prevent value inserted on focus
                    return false;
                },
                select: function( event, ui ) {
                    // add the selected item
                    this.value = ui.item.value;
                    return false;
                }
            });
    });
    </script>
</head>
<body>
 
<div class="ui-widget">
    <label for="material">Material: </label>
    <input id="material" size="50" />
</div>
 
 
</body>
</html>
