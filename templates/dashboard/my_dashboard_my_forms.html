{% extends "mdcs/extra/one_column.html" %}
{% load staticfiles %}
{% load dict_key_extras %}

{% comment %}
<!--
################################################################################
#
# File Name: my_profile_change_password.html
# Application: templates
# Description: 
#
# Author: Sharief Youssef
#         sharief.youssef@nist.gov
#
#		  Guillaume SOUSA AMARAL
#		  guillaume.sousa@nist.gov
#
# Sponsor: National Institute of Standards and Technology
#
################################################################################
-->
{% endcomment %}

{% block extrastyle %}
<link rel="stylesheet" type="text/css" href="{% static 'resources/css/exploreTabs.css' %}"  media="screen" />
{% endblock %}

{% block title %}
    {% if user.is_staff %}
        <h1><span>Unpublished Records</span></h1>
    {% else %}
        <h1><span>My Unpublished Records</span></h1>
    {% endif %}
{% endblock %}
{% block menu %}{% include 'mdcs/menus/main.html' with active_tab='profile' %}{% endblock %}
{% block submenu %}{% include 'mdcs/menus/submenu/dashboard.html' with active_tab='tab2' %}{% endblock %}

{% block content%}
<div id="body">
        {% if forms or otherUsersForms %}
        <span>
            You can review all unpublished records{% if not user.is_staff %} you have created{% endif %}. You can either delete your unpublished record or change the owner. <br><br>
        </span>
        {% endif %}
        {% if user.is_staff %}
        <ul  class="nav nav-tabs">
                    <li class="active"> <a href="#admin" data-toggle="tab" onclick="resetOtherCheckBox();" style="text-decoration:none;">Admin</a> </li>
                    <li><a href="#others" data-toggle="tab" onclick="resetAdminCheckBox();" style="text-decoration:none;">Others</a> </li>
        </ul>
        <div class="dropdown" id="id_actions" style="display:none">
            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                Choose action
                <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
                {% for value, text in action_form.fields.actions.choices %}
                    <li style="cursor:  pointer;" onclick="action_dashboard({{value}});">{{text}}</li>
                {% endfor %}
            </ul>
        </div>
        {%endif%}
        <br/>
        <div class="tab-content">
          <div class="tab-pane active" id="admin" style="width:98%">
            {% if forms%}
                {% include 'dashboard/my_dashboard_my_forms_table.html' with forms=forms group='admin' %}
            {%else%}
                There are no unpublished forms saved for now.
            {%endif%}
          </div>
          <div class="tab-pane" id="others" style="width:98%">
            {% if otherUsersForms%}
                {% include 'dashboard/my_dashboard_my_forms_table.html' with forms=otherUsersForms group='other' %}
            {%else%}
                No other users unpublished forms found.
            {%endif%}
          </div>
        </div>
</div>
<div class="clear"></div>
<hr>
{% endblock %}

{% block popups %}
<div id="dialog-delete-form" title="Delete Form" style="display:none;">
Are you sure you want to delete this unpublished record?
</div>

<div id="dialog-change-owner-form" title="Change Form Owner" style="display:none;">
    <div class="alert alert-danger" id="banner_errors" style="display: none;">
        <a href="#" class="close" data-hide="alert" aria-label="close">&times;</a>
        <h4><i class="fa fa-exclamation-circle fa-1x"></i> Error</h4>
        <div id="form_start_errors">
        </div>
    </div>
    Please select the new owner:
       {{user_form}}
</div>
{% endblock %}

{% block extrajs %}
<script src="{% static 'inc/controllers/js/curate.js' %}"></script>
<script src="{% static 'inc/controllers/js/dashboard.js' %}"></script>
<script>
    initBanner();
    {% if user.is_staff %}
    $(document).ready(function(){
        initForm();
        initAdmin();
    });
    {% endif %}
</script>
{% endblock %}

