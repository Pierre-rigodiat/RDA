{% extends "mdcs/extra/one_column.html" %}
{% load staticfiles %}
{% load auth_extras %}
{% comment %}
<!--
################################################################################
#
# File Name: my_dashboard_my_records.html
# Application: user_dashboard
# Description:
#
# Author: Sharief Youssef
#         sharief.youssef@nist.gov
#
#		  Xavier SCHMITT
#		  xavier.schmitt@nist.gov
#
# Sponsor: National Institute of Standards and Technology
#
################################################################################
-->
{% endcomment %}
{% block title %}
    {% if user.is_staff %}
        <h1><span>Published Records</span></h1>
    {% else %}
        <h1><span>My Published Records</span></h1>
    {% endif %}
{% endblock %}
{% block menu %}{% include 'mdcs/menus/main.html' with active_tab='profile' %}{% endblock %}
{% block submenu %}{% include 'mdcs/menus/submenu/dashboard.html' with active_tab='tab1' %}{% endblock %}
{% block content %}
    <div id="body">
            {% if user.is_staff %}
            <ul  class="nav nav-tabs">
                        <li class="active"> <a href="#admin" data-toggle="tab" onclick="resetOtherCheckBox();" style="text-decoration:none;">Admin</a> </li>
                        <li><a href="#others" data-toggle="tab" onclick="resetAdminCheckBox();" style="text-decoration:none;">Others</a> </li>
            </ul>
            <div class="dropdown" id="id_actions" style="display:none">
                <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    Choose action
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    {% for value, text in action_form.fields.actions.choices %}
                        <li style="cursor:  pointer;" onclick="action_dashboard({{value}});">{{text}}</li>
                    {% endfor %}
                </ul>
            </div>
            {%endif%}
            <br/>
            <div class="tab-content">
			  <div class="tab-pane active" id="admin" style="width:98%">
                {% if XMLdatas%}
                    {% with canEdit=request.user|has_perm:'curate.curate_edit_document' canDelete=request.user|has_perm:'curate.curate_delete_document' %}
                            {% include 'dashboard/my_dashboard_my_records_table.html' with XMLdatas=XMLdatas group='admin' %}
                    {% endwith%}
                {%else%}
                    No published record found.
                {%endif%}
              </div>
              <div class="tab-pane" id="others" style="width:98%">
                {% if OtherUsersXMLdatas%}
                    {% with canEdit=request.user|has_perm:'curate.curate_edit_document' canDelete=request.user|has_perm:'curate.curate_delete_document' %}
                            {% include 'dashboard/my_dashboard_my_records_table.html' with XMLdatas=OtherUsersXMLdatas group='other' %}
                    {% endwith%}
                {%else%}
                    No other users published records found.
                {%endif%}
              </div>
            </div>
	</div>
    <div class="clear"></div>
<hr>
{% endblock %}

{% block popups %}
<div id="dialog-delete-result" title="Delete Document" style="display:none;">
Are you sure you want to delete this document?
</div>
<div id="dialog-publish" title="Publish Document" style="display:none;">
Are you sure you want to publish this document?
</div>
<div id="dialog-unpublish" title="Unpublish Document" style="display:none;">
Are you sure you want to unpublish this document?
</div>
<div id="dialog-detail-result" title="Resource Details" style="display:none;">
<div id="result_detail">
</div>
</div>

<div id="dialog-change-owner-record" title="Change Record Owner" style="display:none;">
    <div class="alert alert-danger" id="banner_errors" style="display: none;">
        <a href="#" class="close" data-hide="alert" aria-label="close">&times;</a>
        <h4><i class="fa fa-exclamation-circle fa-1x"></i> Error</h4>
        <div id="form_start_errors">
        </div>
    </div>
    Please select the new owner:
       {{user_form}}
</div>
{% endblock %}

{% block extrajs %}
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <script src="{% static 'inc/controllers/js/dashboard.js' %}"></script>
  <script>
    initBanner();
    {% if user.is_staff %}
    $(document).ready(function(){
        initRecord();
        initAdmin();
    });
    {% endif %}
  </script>
{% endblock %}