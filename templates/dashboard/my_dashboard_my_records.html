{% extends "nmrr/extra/small_intro.html" %}
{% load staticfiles %}
{% load auth_extras %}
{% comment %}
<!--
################################################################################
#
# File Name: my_dashboard_my_records.html
# Application: profile/dashboard
# Description:
#
# Author: Sharief Youssef
#         sharief.youssef@nist.gov
#
#		  Xavier SCHMITT
#		  xavier.schmitt@nist.gov
#
# Sponsor: National Institute of Standards and Technology
#
################################################################################
-->
{% endcomment %}
{% block menu %}{% include 'nmrr/menus/main.html' with active_tab='profile' %}{% endblock %}

{% block extrastyle %}
<link rel="stylesheet" type="text/css" href="{% static 'css/nmrr/result.css' %}" media="screen" />
{% endblock %}

{% block content %}
    <div id="body">
        <div class="width">
            {% if not template %}
                    <div class="btn-group pull-right">
                        <button class="btn clear-fields" onclick="location.href='/dashboard'"><i class="icon-file"></i> My Dashboard</button>
                        <button class="btn clear-fields" onclick="location.href='/curate'"><i class="icon-file"></i> Add New Resource</button>
                    </div>
                    <h3>My Resources</h3>
            {% endif%}
            {% if template == "organization" %}
                    <div class="btn-group pull-right">
                        <button class="btn clear-fields" onclick="location.href='/dashboard'"><i class="icon-file"></i> My Dashboard</button>
                        <button class="btn clear-fields" onclick="location.href='/curate/start_curate?template=organization'"><i class="icon-file"></i> Add New Organization</button>
                    </div>
                    <h3>My Organizations</h3>
            {% endif%}
            {% if template == "datacollection" %}
              <div class="btn-group pull-right">
                  <button class="btn clear-fields" onclick="location.href='/dashboard'"><i class="icon-file"></i> My Dashboard</button>
                  <button class="btn clear-fields" onclick="location.href='/curate/start_curate?template=datacollection'"><i class="icon-file"></i> Add New Data Collection</button>
                  <button class="btn clear-fields" onclick="location.href='/curate/start_curate?template=repository'"><i class="icon-file"></i> New Repository</button>
                  <button class="btn clear-fields" onclick="location.href='/curate/start_curate?template=projectarchive'"><i class="icon-file"></i> New Project Archive</button>
                  <button class="btn clear-fields" onclick="location.href='/curate/start_curate?template=database'"><i class="icon-file"></i> New Database</button>
              </div>
              <h3>My Data Collections</h3>
            {% endif%}
            {% if template == "dataset" %}
                <div class="btn-group pull-right">
                    <button class="btn clear-fields" onclick="location.href='/dashboard'"><i class="icon-file"></i> My Dashboard</button>
                    <button class="btn clear-fields" onclick="location.href='/curate/start_curate?template=dataset'"><i class="icon-file"></i> Add New Dataset</button>
                </div>
                <h3>My Datasets</h3>
            {% endif%}
            {% if template == "service" %}
                <div class="btn-group pull-right">
                    <button class="btn clear-fields" onclick="location.href='/dashboard'"><i class="icon-file"></i> My Dashboard</button>
                    <button class="btn clear-fields" onclick="location.href='/curate/start_curate?template=service'"><i class="icon-file"></i> Add New Service</button>
                </div>
                <h3>My Services</h3>
            {% endif%}
            {% if template == "informational" %}
                <div class="btn-group pull-right">
                    <button class="btn clear-fields" onclick="location.href='/dashboard'"><i class="icon-file"></i> My Dashboard</button>
                    <button class="btn clear-fields" onclick="location.href='/curate/start_curate?template=informational'"><i class="icon-file"></i> Add New Informational Site</button>
                </div>
                    <h3>My Informational Sites</h3>
            {% endif%}
            {% if template == "software" %}
                <div class="btn-group pull-right">
                    <button class="btn clear-fields" onclick="location.href='/dashboard'"><i class="icon-file"></i> My Dashboard</button>
                    <button class="btn clear-fields" onclick="location.href='/curate/start_curate?template=software'"><i class="icon-file"></i> Add New Software</button>
                </div>
                <h3>My Software</h3>
            {% endif%}

            <br>
            <br>

            <table>
            <tr>
                <td align="center" style={% if not template %}" border-color:#000000;border-size:15px"{% endif%}>
                    <a href="/dashboard/resources{% if ispublished == True %}?ispublished=true{% elif ispublished == False %}?ispublished=false{% endif%}">
                    <div align="center"><img width="100" src="/static/img/allresources.png"><br>
                    All Resources</div>
                    </a>
                </td>
                <td align="center" style={% if template == "organization" %}"border-color:#000000;border-size:15px"{% endif%}>
                    <a href="/dashboard/resources?template=organization{% if ispublished == True %}&ispublished=true{% elif ispublished == False %}&ispublished=false{% endif%}">
                    <div align="center"><img width="100" src="/static/img/organization.png"><br>
                    Organizations</div>
                    </a>
                </td>
                <td align="center" style={% if template == "datacollection" %}"border-color:#000000;border-size:15px"{% endif%}>
                    <a href="/dashboard/resources?template=datacollection{% if ispublished == True %}&ispublished=true{% elif ispublished == False %}&ispublished=false{% endif%}">
                    <div align="center"><img width="100" src="/static/img/datacollection.png"><br>
                    Data Collections</div>
                    </a>
                </td>
                <td align="center" style={% if template == "dataset" %}"border-color:#000000;border-size:15px"{% endif%}>
                    <a href="/dashboard/resources?template=dataset{% if ispublished == True %}&ispublished=true{% elif ispublished == False %}&ispublished=false{% endif%}">
                    <div align="center"><img width="100" src="/static/img/dataset.png"><br>
                    Datasets</div>
                    </a>
                </td>
                <td align="center" style={% if template == "service" %}"border-color:#000000;border-size:15px"{% endif%}>
                    <a href="/dashboard/resources?template=service{% if ispublished == True %}&ispublished=true{% elif ispublished == False %}&ispublished=false{% endif%}">
                    <div align="center"><img width="100" src="/static/img/service.png"><br>
                    Services</div>
                    </a>
                </td>
                <td align="center" style={% if template == "informational" %}"border-color:#000000;border-size:15px"{% endif%}>
                    <a href="/dashboard/resources?template=informational{% if ispublished == True %}&ispublished=true{% elif ispublished == False %}&ispublished=false{% endif%}">
                    <div align="center"><img width="100" src="/static/img/informational.png"><br>
                    Informational</div>
                    </a>
                </td>
                <td align="center" style={% if template == "software" %}"border-color:#000000;border-size:15px"{% endif%}>
                    <a href="/dashboard/resources?template=software{% if ispublished == True %}&ispublished=true{% elif ispublished == False %}&ispublished=false{% endif%}">
                    <div align="center"><img width="100" src="/static/img/software.jpg"><br>
                    Software</div>
                    </a>
                </td>
            </tr>
            </table>

            <ul class="nav nav-tabs">
                    {% if ispublished == None %} <li class="active"> {%else%} <li> {% endif%} <a href="/dashboard/resources{% if template  %}?template={{template}}{% endif%}">All</a></li>
                    {% if ispublished == True %} <li class="active"> {%else%} <li> {% endif%}<a href="/dashboard/resources?{% if template  %}template={{template}}{% endif%}&ispublished=true">Published</a></li>
                    {% if ispublished == False %} <li class="active"> {%else%} <li> {% endif%}<a href="/dashboard/resources?{% if template  %}template={{template}}{% endif%}&ispublished=false">Not Published</a></li>
            </ul>

            {% if user.is_staff %}
                <span>
                    <div class="tpl-title">My Resources</div>
                </span>
            {%endif%}

            {% if XMLdatas%}
                {% with canEdit=request.user|has_perm:'curate.curate_edit_document' canDelete=request.user|has_perm:'curate.curate_delete_document' %}
                    {% include 'dashboard/my_dashboard_my_records_table.html' with XMLdatas=XMLdatas %}
                {% endwith%}
            {%else%}
                <br><br>
                No Resources found
            {%endif%}
            <div class="clear"></div>
            {% if user.is_staff %}
                <span>
                    <div class="tpl-title">Other users Resources</div>
                </span>
                {% if OtherUsersXMLdatas%}
                    {% with canEdit=request.user|has_perm:'curate.curate_edit_document' canDelete=request.user|has_perm:'curate.curate_delete_document' %}
                        {% include 'dashboard/my_dashboard_my_records_table.html' with XMLdatas=OtherUsersXMLdatas %}
                    {% endwith%}
                {%else%}
                    No other users Resources found
                {%endif%}
            {%endif%}
        </div>
	</div>
{% endblock %}

{% block popups %}
<div id="dialog-delete-draft" title="Delete new version" style="display:none;">
    <div class="alert alert-warning" id="banner_wait" style="display: none;">
        <h4><i class='fa fa-circle-o-notch fa-spin fa-2x'></i>  </i>&nbsp;&nbsp;Please wait...</h4>
    </div>
Are you sure you want to delete this new version?
</div>
<div id="dialog-delete-result" title="Delete Document" style="display:none;">
Are you sure you want to delete this document?
</div>
<div id="dialog-publish" title="Publish Document" style="display:none;">
Are you sure you want to publish this document?
</div>
<div id="dialog-unpublish" title="Unpublish Document" style="display:none;">
Are you sure you want to unpublish this document?
</div>
<div id="dialog-detail-result" title="Resource Details" style="display:none;">
<div id="result_detail">
</div>
</div>
<div id="dialog-publish-draft" title="Publish new version" style="display:none;">
    <div class="alert alert-warning" id="banner_wait_publish" style="display: none;">
        <h4><i class='fa fa-circle-o-notch fa-spin fa-2x'></i>  </i>&nbsp;&nbsp;Please wait...</h4>
    </div>
Are you sure you want to publish this new version? Please note this will permanently delete the current published record.
</div>

<div id="dialog-change-owner-record" title="Change Record Owner" style="display:none;">
    <div class="alert alert-danger" id="banner_errors" style="display: none;">
        <a href="#" class="close" data-hide="alert" aria-label="close">&times;</a>
        <h4><i class="fa fa-exclamation-circle fa-1x"></i> Error</h4>
        <div id="form_start_errors">
        </div>
    </div>
    Please select the new owner:
       {{user_form}}
</div>
{% endblock %}

{% block extrajs %}
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  <script src="{% static 'inc/controllers/js/dashboard.js' %}"></script>
  <script>
    initBanner();
  </script>
{% endblock %}