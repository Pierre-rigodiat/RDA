{% extends "mdcs/extra/one_column.html" %}
{% load staticfiles %}

{% comment %}
<!--
################################################################################
#
# File Name: contact_messages.html
# Application: templates/admin
# Description: 
#
# Author: Sharief Youssef
#         sharief.youssef@nist.gov
#
#		  Guillaume SOUSA AMARAL
#		  guillaume.sousa@nist.gov
#
# Sponsor: National Institute of Standards and Technology (NIST)
#
################################################################################
-->
{% endcomment %}

{% block extrastyle %}
<link rel="stylesheet" type="text/css" href="{% static 'resources/css/lib/jquery-duration-picker.css' %}"  media="screen" />
{% endblock %}

{% block title %}<h1>Data Providers</h1>{% endblock %}

{% block menu %}{% include 'admin/menu/main.html' with active_tab='tab6' %}{% endblock %}
{% block submenu %}{% include 'admin/menu/submenu/oai-pmh.html' with active_tab='tab1' %}{% endblock %}

{% block content%}
<div class="clearer">&nbsp;</div>
<div class="toolbar">
	<div class="btn-group pull-right">
    	<span class="btn" onclick="displayAddRegistry();" style="text-decoration:none">Add Data Provider</span>
		<span class="btn" onclick="checkAllStatus();"><i class="fa fa-check-circle"></i> Check all Data Providers</span>
  	</div>
</div>
<br/><br/><br/>
    {% if registries %}
    <table class="data-table">
        <tr>
            <th>Name</th>
            <th>URL</th>
            <th>Harvest Rate</th>
            <th>Description</th>
            <th>Status</th>
            <th>Harvest</th>
            <th>Actions</th>
        </tr>

        {% for registry in registries %}
            {% cycle 'even' '' as rowcolors silent %}
            <tr class="{{ rowcolors }}">
                <td>{{ registry.name }}</td>
                <td>{{ registry.url }}</td>
                <td>{{ registry.harvestrate }}</td>
                <td>{{ registry.description }}</td>
                <td style="text-align:center;" url="{{registry.url}}" registryID="{{registry.id}}" id="Status{{registry.id}}">
                    <span id="toto" class="btn" onclick="checkStatus('{{registry.id}}', '{{registry.url}}');" style="text-decoration:none">Check status</span>
                </td>
                <td id="ButtonSet{{registry.id}}">
                        {% if registry.harvest %}
                            <input id="{{registry.id}}" class="cmn-toggle cmn-toggle-round" disabled="True" type="checkbox" checked >
                        {% else %}
                            <input id="{{registry.id}}" class="cmn-toggle cmn-toggle-round" type="checkbox" disabled="True">
                        {% endif %}
                        <label for="{{registry.id}}"></label>
                </td>
                <td>
                    <div class="icon legend result" onclick="viewRegistry('{{ registry.id }}')">View</div>
                    <div class="icon legend edit" onclick="editRegistry('{{ registry.id }}')">Edit</div>
                    <div class="icon legend delete" onclick="deleteRegistry('{{ registry.id }}')">Delete</div>
                </td>
            </tr>
        {% endfor %}
    </table>

    {% else %}
        No registries available. Click on the Add button to add registries.
    {% endif %}
{% endblock %}  

{% block popups %}
<div id="dialog-detail-registry" title="Data Provider Details" style="display:none;">
    <div id="registry_detail"></div>
</div>

<div id="dialog-registry" title="Add Data Provider" style="display: none;">
    <div class="alert alert-warning" id="banner_add_wait" style="display: none;">
        <h4><i class='fa fa-circle-o-notch fa-spin fa-1x'></i>  </i>&nbsp;&nbsp;Please wait for connection verification ...</h4>
    </div>
    <div class="alert alert-error" id="banner_add_errors" style="display: none;">
        <h4><i class="fa fa-exclamation-circle fa-1x"></i> Error</h4>
        <div id="form_add_errors">
        </div>
    </div>
	<form id="form_add"  enctype="multipart/form-data">
		{% csrf_token %}
		{% include 'admin/oai_pmh/form_registry_add.html'%}
		<div id="form_add_current"></div>
	</form>
</div>

<div id="dialog-edit" title="Edit" style="display:none;">
    <div class="alert alert-error" id="banner_edit_errors" style="display: none;">
        <h4><i class="fa fa-exclamation-circle fa-1x"></i> Error</h4>
        <div id="form_edit_errors">
        </div>
    </div>
    <form id="form_edit"  action="/oai_pmh/client/update/registry" method="put" enctype="multipart/form-data">
        {% csrf_token %}
        <div id="form_edit_current"></div>
    </form>
</div>

<div id="dialog-confirm-delete" title="Delete" style="display:none;">
    <div class="alert alert-warning" id="banner_delete_wait" style="display: none;">
        <h4><i class='fa fa-circle-o-notch fa-spin fa-1x'></i>  </i>&nbsp;&nbsp;Please wait ...</h4>
    </div>
    <div class="alert alert-error" id="banner_delete_errors" style="display: none;">
        <h4><i class="fa fa-exclamation-circle fa-1x"></i> Error</h4>
        <div id="form_delete_errors">
        </div>
    </div>
    Are you sure you want to delete this repository?
</div>
{% endblock %}

{% block extrajs %}
<script src="{% static 'libs/duration/jquery-duration-picker.js' %}"></script>
<script src="{% static 'inc/controllers/js/oai_pmh.js' %}"></script>
<script>
	Init();
</script>

{% endblock %}  
