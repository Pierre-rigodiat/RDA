{% load staticfiles %}
{% comment %}
<!--
################################################################################
#
# File Name: website.html
# Application: templates/admin
# Description:
#
# Author: Sharief Youssef
#         sharief.youssef@nist.gov
#
#		  Guillaume SOUSA AMARAL
#		  guillaume.sousa@nist.gov
#
# Sponsor: National Institute of Standards and Technology (NIST)
#
################################################################################
-->
{% endcomment %}
{% block extrastyle %}
{% endblock %}

{% block content%}

<h2 class="left">OAI-PMH XSLT</h2>
<div class="clearer">&nbsp;</div>
<div class="btn-group pull-right">
<span class="btn btn-default upload" onclick="displayOaiImport();">
	<i class="fa fa-upload"></i> Upload XSLT
</span>
</div>

{% if oai_pmh_xslt %}
<table class="data-table">
  <tr>
  	<th>XSLT name</th>
    <th>Filename</th>
    <th>Actions</th>
  </tr>

{% for object in oai_pmh_xslt %}
  {% cycle 'even' '' as rowcolors silent %}
  <tr class="{{ rowcolors }}">
    <td>{{ object.name }}</td>
    <td>{{ object.filename }}</td>
    <td>
    	<div id="EditOAI" class="icon legend edit" objectid="{{ object.id }}" typeXSLT="OAI-PMH">Edit</div>
    	<div class="icon legend delete" objectid="{{ object.id }}" typeXSLT="OAI-PMH" onclick="deleteOaiXSLT(this)">Delete</div>
	</td>
  </tr>

{% endfor %}

</table>

{% else %}
<br>
	There are currently no OAI-PMH XSLT uploaded.  Please click "Upload XSLT" to the right to add OAI-PMH XSLT files.
	<br>
	<br>
{% endif %}

{% endblock %}

{% block popups %}

<div id="dialog-oai-pmh-message" title="Upload OAI-PMH XSLT" style="display: none;">
	<form id="form_oai_pmh_start" action="admin/xml-schemas/manage-xslt" method="post" enctype="multipart/form-data">
		{% csrf_token %}
		<table>
			<tr>
				<td>{{upload_oai_pmh_xslt_Form.oai_name.label}}</td>
				<td>{{upload_oai_pmh_xslt_Form.oai_name}}</td>
			</tr>
			<tr>
				<td>{{upload_oai_pmh_xslt_Form.oai_pmh_xslt_file.label}}</td>
				<td>{{upload_oai_pmh_xslt_Form.oai_pmh_xslt_file}}</td>
			</tr>
		</table>
		<div id="form_oai_pmh_start_current"></div>
	</form>
	<div id="form_oai_pmh_start_errors" style="color:red;">
	</div>
</div>

<div id="dialog-oai-pmh-edit-message" title="Edit XSLT" style="display: none;">
	<table>
		<tr>
			<td>{{upload_xslt_Form.name.label}}</td>
			<td><input type="text" id="edit-oai_pmh_name"/></td>
		</tr>
		<tr>
	</table>
	<div id="form_oai_pmh_edit_errors" style="color:red;">
	</div>
</div>


<div id="dialog-oai-pmh-deletexslt-message" title="Confirm Delete" style="display:none;">
<p></p>
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 10px 0;"></span>
    <p>Are you sure you want to delete this XSLT?</p>
    <p id="delete_oai_pmh_custom_message"></p>
  </p>
</div>

<div id="dialog-oai-pmh-error-edit" title="Error Edit Information" style="display:none;">
<p></p>
  <p>
    An XSLT with this filename already exists.
  </p>
</div>

{% endblock %}

{% block extrajs %}
<script src="{% static 'inc/controllers/js/oai_pmh_xslt_mgr.js' %}"></script>
<script>
InitOai();
</script>
{% endblock %}

