<!-- 
################################################################################
#
# File Name: curate_view_data.html
# Application: templates
# Description: 
#
# Author: Sharief Youssef
#         sharief.youssef@nist.gov
#
# Sponsor: National Institue of Standards and Technology
#
################################################################################
-->

{% load staticfiles %}

{% load dajaxice_templatetags %}

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">

<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
	<meta name="description" content=""/>
	<meta name="keywords" content="" />
	<meta name="author" content="" />
	<link rel="stylesheet" type="text/css" href="{% static 'resources/css/lib/bootstrap.min.css' %}"  media="screen" />
	<link rel="stylesheet" type="text/css" href="{% static 'style.css' %}" media="screen" />
	<link rel="stylesheet" type="text/css" href="{% static 'resources/css/style.add.css' %}"  media="screen" />
	<link rel="stylesheet" type="text/css" href="{% static 'resources/css/xml_display.css' %}" media="screen" />
	<title>Materials Data Curation System</title>

	<script type="text/javascript" src="{% static 'inc/controllers/js/xml_display.js' %}"></script>

	<!-- JQuery & JQuery UI -->
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
        <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
        <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
	<script src="{% static 'dajax/jquery.dajax.core.js' %}"></script>

        {% dajaxice_js_import %}

</head>

<body id="top">

<div id="header-wrapper">
	<div id="header-wrapper-2">
		<div class="center-wrapper">

			<div id="header">

				<div id="logo">
					<h1 id="site-title"><a href="#">Materials Data <span>Curation System</span></a></h1>
					<h2 id="site-slogan">
{% if user.is_authenticated %}
    Welcome, {{ user.username }}. Thanks for logging in.
{% else %}
    Part of the Materials Genome Initiative
{% endif %}
</h2>
				</div>

				<div id="help-wrapper">
					<div id="help" align="center">
<nobr>
{% if user.is_authenticated %}
    <a href="/logout">Logout</a> 
{% else %}
    <a href="/login">Login</a> 
{% endif %}

<span class="text-separator">|</span> <a href="/my-profile">My Profile</a> <span class="text-separator">|</span> <a href="/help">Help</a> 
</nobr>

					</div>
				</div>

			</div>

		</div>
	</div>
</div>

<div id="navigation-wrapper">
	<div id="navigation-wrapper-2">
		<div class="center-wrapper">
	
			<div id="navigation">

				<ul class="tabbed">
					<li><a href="/">Home</a></li>
					<li class="current_page_item"><a href="/curate">Data Curation</a></li>
					<li><a href="/explore">Data Exploration</a></li>
				</ul>

				<div class="clearer">&nbsp;</div>

			</div>

		</div>
	</div>
</div>

<div id="subnav-wrapper">
  <div id="subnav-wrapper-2">

    <div class="center-wrapper">
      
      <div id="subnav">

	<ul class="tabbed">
	  <li><a href="/curate/select-template">Select Template</a></li>
	  <li><a href="/curate/enter-data">Enter Data</a></li>
	  <li class="current_page_item"><a href="/curate/view-data">View Data</a></li>
	  </ul>

	<div class="clearer">&nbsp;</div>

	</div>

      </div>
    </div>
</div>

<div id="content-wrapper">
	<div class="center-wrapper">
		
		<div class="content" id="content-two-columns">

		  <div id="main-wrapper">
		    <div id="main">

		      <div class="post">

			<div class="post-title"><h1>XML View</h1></div>
			
			<div class="post-body">

			  <p class="large">This is a preview of the curated data in XML format. As part of this demo, please save your data to the repository so that we can better evaluate our system. You can also click the download button for a copy on your local machine.</p>
			  

			  
			  </div>
			
			</div>

		      <div class="message"></div>
		      
		      <div class="btn-group pull-right">
			<button class="btn download-xml"><i class="icon-arrow-down"></i> Download XML</button>
			<button class="btn save-to-repo"><i class="icon-star"></i> Save to repository</button>
			</div>
		      


			<div class="clearer">&nbsp;</div>

		      <div id="XMLHolder"></div>

<br><br>
		      
<!--		      <div id="XSDHolder"></div> -->

		      <script> 
			getXmlStringCallback = function(data) 
			{
			  Dajax.process(data);
			  console.log('BEGIN [getXmlStringCallback]');
  			  LoadXMLString('XMLHolder',data.xmlString);
			  console.log('END [getXmlStringCallback]');
			}

			Dajaxice.curate.getXmlString(getXmlStringCallback);
		      </script>

		      <script src="inc/controllers/js/view_xml.js"></script>
		      <script>
			LoadXMLString('XMLHolder', <?php echo "'".str_replace('"', '\\"', $xmlTree)."'"; ?>);
			
			loadViewXmlController();
			</script>

		      <script> 
			getXsdStringCallback = function(data) 
			{
			  Dajax.process(data);
			  console.log('BEGIN [getXsdStringCallback]');
  			  LoadXMLString('XSDHolder',data.xmlString);
			  console.log('END [getXsdStringCallback]');
			}

			Dajaxice.curate.getXsdString(getXsdStringCallback);
		      </script>
		      
		      <script src="inc/controllers/js/view_xml.js"></script>
		      <script>
			LoadXMLString('XSDHolder', <?php echo "'".str_replace('"', '\\"', $xmlTree)."'"; ?>);
			
			loadViewXmlController();
			</script>

		      </div>
		    </div>


		  <div id="sidebar-wrapper">
		    <div id="sidebar">

		      <div class="box">

			<div class="box-title">Data Curation</div>

			<div class="box-content">
			  <ul class="nice-list">
			    <li><table><tr><td width="40"><img width="40" height="40" valign="center" src="{% static 'img/Orange_Number_1.png' %}"></td><td><a href="/curate/select-template">Select Template</a></td></tr></table></li>
			    <li><table><tr><td width="40"><img width="40" height="40" valign="center" src="{% static 'img/Orange_Number_2.png' %}"></td><td><a href="/curate/enter-data">Enter Data</a></td></tr></table></li>
			    <li><table><tr><td width="40"><img width="40" height="40" valign="center" src="{% static 'img/Orange_Number_3.png' %}"></td><td><strong><a href="/curate/view-data">View Data</a></strong></td></tr></table></li>
			    </ul>
			  </div>

			</div>
		    </div>
		  </div>

<div class="clearer">&nbsp;</div>

		</div>

	</div>
</div>

<div id="footer-wrapper">

	<div class="center-wrapper">

		<div id="footer2">

			<div class="left">
				<a href="/">Home</a> <span class="text-separator">|</span> <a href="/curate">Data Curation</a> <span class="text-separator">|</span> <a href="/explore">Data Exploration</a> <span class="text-separator">|</span> <a href="/about">About</a> 
			</div>

			<div class="right">
				<a href="#">Top ^</a>
			</div>
			
			<div class="clearer">&nbsp;</div>

		</div>

	</div>

</div>

<div id="bottom">

	<div class="center-wrapper">

		<div class="left">
			&copy; 2012 - {{ request.session.currentYear }} Materials Data Curation System <span class="text-separator">|</span> <a href="/privacy-policy">Privacy Policy</a> <span class="text-separator">|</span> <a href="/terms-of-use">Terms of Use</a> 
{% if user.is_staff %}
<span class="text-separator">|</span> <a href="/admin" target="_new">Administration</a> 
{% else %}

{% endif %}
		</div>

		<div class="right">
			<a href="http://templates.arcsin.se/">Website template</a> by <a href="http://arcsin.se/">Arcsin</a> 
		</div>
		
		<div class="clearer">&nbsp;</div>

	</div>

</div>

	<script src="{% static 'resources/js/bootstrap.min.js' %}"></script>
	<script src="{% static 'inc/controllers/js/tpl_sel.js' %}"></script>
	<script>
	  loadCurrentTemplateView();
	</script>


<div id="dialog-downloaded-message" title="Download Complete" style="display:none;">
<p></p>
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 10px 0;"></span>
    XML File Downloaded.
  </p>
  <p>
    Currently using <a href="/view-schema/{{ request.session.currentTemplate }}" target="_new">{{ request.session.currentTemplate }}</a>
  </p>
</div>


<div id="dialog-save-as-message" title="Save to Repository" style="display:none;">
<p></p>
<!--  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 10px 0;"></span>
    Save form
  </p>
-->
  <p>
    Save As: <input type="text" size="30" id="saveAsInput">
  </p>
  <p id="saveAsErrorMessage"></p>
</div>

<div id="dialog-saved-message" title="XML Data Saved" style="display:none;">
<p></p>
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 10px 0;"></span>
    Save to repository successful.
  </p>
<!--  <p>
    Currently using <a href="/view-schema/{{ request.session.currentTemplate }}" target="_new">{{ request.session.currentTemplate }}</a>
  </p>
-->
</div>


</body>
</html>
