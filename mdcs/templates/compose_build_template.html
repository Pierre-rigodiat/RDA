<!-- 
################################################################################
#
# File Name: compose_build_templates.html
# Application: templates
# Description: 
#
# Author: Sharief Youssef
#         sharief.youssef@nist.gov
#
#		  Guillaume SOUSA AMARAL
#		  guillaume.sousa@nist.gov
#
# Sponsor: National Institute of Standards and Technology (NIST)
#
################################################################################
-->

{% load staticfiles %}

{% load dajaxice_templatetags %}

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en">

<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
	<meta name="description" content=""/>
	<meta name="keywords" content="" />
	<meta name="author" content="" />
	<link rel="stylesheet" type="text/css" href="{% static 'resources/css/lib/bootstrap.min.css' %}"  media="screen" />
	<link rel="stylesheet" type="text/css" href="{% static 'resources/css/style.css' %}" media="screen" />
	<link rel="stylesheet" type="text/css" href="{% static 'resources/css/style.add.css' %}"  media="screen" />
	<link rel="stylesheet" type="text/css" href="{% static 'resources/css/XMLTree.css' %}" media="screen" />
	<link rel="stylesheet" type="text/css" href="{% static 'resources/css/bucket.css' %}" media="screen" />
	<title>Materials Data Curation System</title>	

	<!-- JQuery & JQuery UI -->
	<script src="{% static 'resources/lib/jquery/jquery-1.11.1.min.js' %}"></script>
	<script src="{% static 'resources/js/bootstrap.min.js' %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'resources/lib/jquery-ui/themes/smoothness/jquery-ui.css' %}"/>        
    <script src="{% static 'resources/lib/jquery-ui/themes/smoothness/jquery-ui.js' %}"></script>
	<script src="{% static 'dajax/jquery.dajax.core.js' %}"></script>
	<script src="{% static 'inc/controllers/js/composer.js' %}"></script>

    {% dajaxice_js_import %}
</head>



<body id="top">

<div id="header-wrapper">
	<div id="header-wrapper-2">
		<div class="center-wrapper">

			<div id="header">

				<div id="logo">
					<h1 id="site-title"><a href="#">Materials Data <span>Curation System</span></a></h1>
					<h2 id="site-slogan">
{% if user.is_authenticated %}
    Welcome, {{ user.username }}. Thanks for logging in.
{% else %}
    Part of the Materials Genome Initiative
{% endif %}
</h2>
				</div>

				<div id="help-wrapper">
					<div id="help" align="center">
<nobr>
{% if user.is_authenticated %}
    <a href="/logout">Logout</a> 
{% else %}
    <a href="/login">Login</a> 
{% endif %}

<span class="text-separator">|</span> <a href="/my-profile">My Profile</a> <span class="text-separator">|</span> <a href="/help">Help</a> 
</nobr>

					</div>
				</div>

			</div>

		</div>
	</div>
</div>

<div id="navigation-wrapper">
	<div id="navigation-wrapper-2">
		<div class="center-wrapper">
	
			<div id="navigation">

				<ul class="tabbed">
					<li><a href="/">Home</a></li>
					<li><a href="/curate">Data Curation</a></li>
					<li><a href="/explore">Data Exploration</a></li>
					<li class="current_page_item"><a href="/compose">Composer</a></li>
				</ul>
				<div class="clearer">&nbsp;</div>

			</div>

		</div>
	</div>
</div>

<div id="subnav-wrapper">
  <div id="subnav-wrapper-2">

    <div class="center-wrapper">
      
      <div id="subnav">

	<ul class="tabbed">
	  <li><div style="cursor:pointer"><a href="/compose/select-template">Start Template</a></div></li>
	  <li class="current_page_item"><a href="/compose/build-template">Compose Template</a></li>
	  <!-- <li><div style="cursor:pointer"><a href="/compose/view-template">View Template</a></div></li> -->
	</ul>

	<div class="clearer">&nbsp;</div>

	</div>

      </div>
    </div>
</div>

<div id="content-wrapper">
	<div class="center-wrapper">
		
		<div class="content" id="content-two-columns">

		  <div id="main-wrapper">
		    <div id="main">

		      <div class="post">

			<div class="post-title"><h1>Compose Template</h1></div>
			
			<div class="post-body">

			  <!--<p><img src="sample-thumbnail-2.jpg" width="640" height="200" alt="" class="bordered" /></p>

			      <h2 class="quiet">Introducing the next generation software</h2> -->
			  
			  <p class="large">
			  Please click on an element of the tree to start composing the template. A menu will appear and you will be able to interacting with that element.
			  </p>

		

			</div>
			
		      </div>
		<div class="btn-group pull-right">
			<button class="btn download"><i class="icon-arrow-down"></i> Download </button>
		    <button class="btn save template"><i class="icon-hdd"></i> Save Template </button>
		    <button class="btn save types"><i class="icon-hdd"></i> Save Type </button>		    
	    </div>
	    <div id="template_selection">
		      
{% if request.session.currentComposeTemplate %} 

			<div class="clearer">&nbsp;</div>

		      <div id="XMLHolder"></div>

				<br/><br/>

{% else %}

{% endif %}



</div>


		    </div>
		  </div>

		  <div id="sidebar-wrapper">
		    <div id="sidebar">

		      <div class="box" ><!--"floatMenu">-->

			<div class="box-title">Composer</div>

			<div class="box-content">
			  <ul class="nice-list">
			    <li><table><tr><td width="40"><img width="40" height="40" valign="center" src="{% static 'img/Orange_Number_1.png' %}"></td><td><div style="cursor:pointer"><a href="/compose/select-template">Start Template</a></div></td></tr></table></li>
			    <li><table><tr><td width="40"><img width="40" height="40" valign="center" src="{% static 'img/Orange_Number_2.png' %}"></td><td><strong><a href="/compose/build-template">Compose Template</a></strong></td></tr></table></li>
			    <!-- <li><table><tr><td width="40"><img width="40" height="40" valign="center" src="{% static 'img/Orange_Number_3.png' %}"></td><td><div style="cursor:pointer"><a href="/compose/view-template">View Template</a></td></tr></table></li> -->
			  </ul>
			</div>
			<div class="box-title">Legend</div>

			<div class="box-content">
			  <ul style="list-style: none;">
			    <li><span class="name">name</span></li>
			    <li><span class="type">Type</span></li>
			    <li><span class="occurs">(minOccurs, maxOccurs)</span></li>  
			  </ul>
			</div>
			</div>
		    </div>
		  </div>

<div class="clearer">&nbsp;</div>

		</div>

	</div>
</div>

<div id="footer-wrapper">

	<div class="center-wrapper">

		<div id="footer2">

			<div class="left">
				<a href="/">Home</a> <span class="text-separator">|</span> <a href="/curate">Data Curation</a> <span class="text-separator">|</span> <a href="/explore">Data Exploration</a> <span class="text-separator">|</span> <a href="/compose">Composer</a><span class="text-separator">|</span> <a href="/contact">Contact</a> 
			</div>

			<div class="right">
				<a href="#">Top ^</a>
			</div>
			
			<div class="clearer">&nbsp;</div>

		</div>

	</div>

</div>

<div id="bottom">

	<div class="center-wrapper">

		<div class="left">
			&copy; 2012 - {{ request.session.currentYear }} Materials Data Curation System <span class="text-separator">|</span> <a href="/privacy-policy">Privacy Policy</a> <span class="text-separator">|</span> <a href="/terms-of-use">Terms of Use</a>  

{% if user.is_staff %}
<span class="text-separator">|</span> <a href="/admin" target="_new">Administration</a> 
{% else %}

{% endif %}
		</div>

		<div class="right">
			<a href="http://templates.arcsin.se/">Website template</a> by <a href="http://arcsin.se/">Arcsin</a> 
		</div>
		
		<div class="clearer">&nbsp;</div>

	</div>

</div>



<div id="dialog-insert-element-sequence" title="Insert an Element" style="display:none;">
  <p>
    Please select the type of the element that you want to insert in the template.
  </p>
  <div id="table_types">
 	{% for bucket, types in bucketsTypes.items %}
 		<h3><span class="bucket" style="background:{{ bucket.color}};">{{bucket.label}}</span></h3>
 		<div>
 		<p>
 		<table class="table table-bordered">
 			{% for type in types %}
 			<tr>
	    		<td templateID='{{type.id}}'>{{ type.title }}</td>
	    		<td>{{ type.filename }}</td>
	    		<td><button class="btn insert"><i class="icon-plus-sign"></i>Insert</button></td>
	 		</tr>
	 		{% endfor %}
	 	</table>
	 	</p>
	 	</div>
 	{% endfor %}
 	
 	<h3>No Buckets</h3>
 	<div>	
 	<p>
 	<table class="table table-bordered">
		{% for type in nobucketsTypes %}
		<tr>
    		<td templateID='{{type.id}}'>{{ type.title }}</td>
    		<td>{{ type.filename }}</td>
    		<td><button class="btn insert"><i class="icon-plus-sign"></i>Insert</button></td>
 		</tr>
 		{% endfor %}
 	</table>
 	</p>
 	</div>
 	
  	<h3>My Types</h3>
  	<div>
  	<p>
  	<table class="table table-bordered">
		{% for type in userTypes %}
		<tr>
    		<td templateID='{{type.id}}'>{{ type.title }}</td>
    		<td>{{ type.filename }}</td>
    		<td><button class="btn insert"><i class="icon-plus-sign"></i>Insert</button></td>
 		</tr>
 		{% endfor %}
 	</table>
 	</p>
 	</div>
	</div>
</div>

<div id="dialog-rename-element" title="Rename Element" style="display:none;">
	<p>
		Use the following form to rename the element:
	</p>
	<table>
		<tr>
			<td>Name:</td>
			<td><input type="text" id="newElementName"/></td>
		</tr>
	</table>
	<div id="rename-element-error" style="color:red;">
	</div>
</div>

<div id="dialog-occurrences-element" title="Manage occurrences" style="display:none;">
	<p>
		Use the following form to manage the occurrences of the selected element.
		Accepted values are integers. The keyword "unbounded" can be used for Maximum Occurrences.
	</p>
	<table>
		<tr>
			<td>Minimum Occurrences:</td>
			<td><input type="text" id="minOccurrences"/></td>
		</tr>
		<tr>
			<td>Maximum Occurrences:</td>
			<td><input type="text" id="maxOccurrences"/></td>
		</tr>
	</table>
	<div id="manage-occurrences-error" style="color:red;">
	</div>
</div>

<div id="dialog-delete-element" title="Delete Element" style="display:none;">
	<p>
		Are you sure you want to delete this element from the current template?
	</p>
</div>


<div id="dialog-save-template" title="Save Template" style="display:none;">
	<p>
		Enter a name for this template.
	</p>
	<table>
		<tr>
			<td>Name:</td>
			<td><input type="text" id="newTemplateName"/></td>
		</tr>
	</table>
	<div id="new-template-error" style="color:red;">
	</div>
</div>

<div id="dialog-save-type" title="Save Type" style="display:none;">
	<p>
		Enter a name for this type.
	</p>
	<table>
		<tr>
			<td>Name:</td>
			<td><input type="text" id="newTypeName"/></td>
		</tr>
	</table>
	<div id="new-type-error" style="color:red;">
	</div>
</div>

<div id="dialog-saved-message" title="XML Data Saved" style="display:none;">
<p></p>
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 10px 0;"></span>
    Saved to repository successfully.
  </p>
</div>

<div id="dialog-change-xsd-type" title="Change Element Type" style="display:none;">
<p>
Select the new element type:
</p>
 <div>
 	<select id="newXSDtype">
 		<option value="sequence">Sequence</option>
 		<option value="choice">Choice</option>
 	</select>
 </div>
</div>

<script>
verifyTemplateIsSelectedBuild();
</script>

<div id="dialog-new-template" title="New Template" style="display:none;">
<p></p>
  <p>
    You are about to create a new template/type. Please provide the name of the type of the root element.
  </p>
  <table>
  	<tr>
  	<td>Root Type: </td>
  	<td><input type="text" id="newTemplateTypeName" placeholder="Root"/></td>
  	</tr>
  </table>
  <div style="color:red;" id="newTemplateTypeNameError">
  </div>
</div>

</body>
</html>
