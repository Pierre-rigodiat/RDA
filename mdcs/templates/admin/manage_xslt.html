{% extends "base_featured.html" %}
{% load staticfiles %}
{% comment %}
<!--
################################################################################
#
# File Name: website.html
# Application: templates/admin
# Description:
#
# Author: Sharief Youssef
#         sharief.youssef@nist.gov
#
#		  Guillaume SOUSA AMARAL
#		  guillaume.sousa@nist.gov
#
# Sponsor: National Institute of Standards and Technology (NIST)
#
################################################################################
-->
{% endcomment %}
{% block extrastyle %}
<link rel="stylesheet" type="text/css" href="{% static 'resources/css/style.add.css' %}" media="screen" />
{% endblock %}
{% block extrahead %}
<script src="{% static 'inc/controllers/js/xslt_mgr.js' %}"></script>
{% endblock %}

{% block title %}<h1> XSLT Manager</h1>{% endblock %}

{% block menu %}{% include 'admin/menu/main.html' with active_tab='tab3' %}{% endblock %}
{% block submenu %}{% include 'admin/menu/submenu/template.html' with active_tab='tab3' %}{% endblock %}

{% block content%}

<div class="right-side">
<span class="ctx_menu">
		<div class="icon legend long upload" onclick="displayImport();">​Upload XSLT​</div>​
</span>
</div>

{% if xslt_files %}
<table class="data-table">
  <tr>
  	<th>XSLT name</th>
    <th>Filename</th>
    <th>All templates</th>
    <th>Actions</th>
  </tr>

{% for object in xslt_files %}
  {% cycle 'even' '' as rowcolors silent %}
  <tr class="{{ rowcolors }}">
    <td>{{ object.title }}</td>
    <td>{{ object.filename }}</td>
    <td id="ButtonSet{{object.id}}">
			{% if object.available_for_all %}
				<input id="{{object.id}}" class="cmn-toggle cmn-toggle-round" disabled="True" type="checkbox" checked >
			{% else %}
				<input id="{{object.id}}" class="cmn-toggle cmn-toggle-round" type="checkbox" disabled="True">
			{% endif %}
			<label for="{{object.id}}"></label>
	</td>
    <td>
    	<div class="icon legend edit" objectid="{{ object.id }}">Edit</div>
    	<div class="icon legend delete" onclick="deleteXSLT('{{ object.id }}')">Delete</div>
	</td>
  </tr>

{% endfor %}

</table>

{% else %}
<br>
	There are currently no XSLT uploaded.  Please click "Upload XSLT" to the right to add XSLT files.
	<br>
	<br>
{% endif %}

{% endblock %}

{% block extra %}

<div id="dialog-message" title="Upload XSLT" style="display: none;">
	<form id="form_start" action="/admin/xml-schemas/manage-xslt" method="post" enctype="multipart/form-data">
		{% csrf_token %}
		<table>
			<tr>
				<td>{{upload_xslt_Form.title.label}}</td>
				<td>{{upload_xslt_Form.title}}</td>
			</tr>
			<tr>
				<td>{{upload_xslt_Form.xslt_file.label}}</td>
				<td>{{upload_xslt_Form.xslt_file}}</td>
			</tr>
			<tr>
				<td>Available for all templates</td>
				<td id="ButtonSet">{{upload_xslt_Form.available_for_all}}<label for="{{upload_xslt_Form.available_for_all.id_for_label}}">vv</label></td>
			</tr>
		</table>
		<div id="form_start_current"></div>
	</form>
	<div id="form_start_errors" style="color:red;">
	</div>
</div>

<div id="dialog-edit-message" title="Edit XSLT" style="display: none;">
	<table>
		<tr>
			<td>{{upload_xslt_Form.title.label}}</td>
			<td><input type="text" id="edit-name"/></td>
		</tr>
		<tr>
	</table>
	<div id="form_edit_errors" style="color:red;">
	</div>
</div>


<div id="dialog-deletexslt-message" title="Confirm Delete" style="display:none;">
<p></p>
  <p>
    <span class="ui-icon ui-icon-circle-check" style="float:left; margin:0 7px 10px 0;"></span>
    <p>Are you sure you want to delete this XSLT?</p>
    <p id="delete_custom_message"></p>
  </p>
</div>

<div id="dialog-error-edit" title="Error Edit Information" style="display:none;">
<p></p>
  <p>
    An XSLT with this filename already exists.
  </p>
</div>

<div id="dialog-success" title="XSLT added" style="display:none;">
<p></p>
  <p>
    XSLT file added with success !
  </p>
</div>

<div id="dialog-success-delete" title="XSLT deleted" style="display:none;">
<p></p>
  <p>
    XSLT file deleted with success !
  </p>
</div>

<div id="dialog-success-update" title="XSLT updated" style="display:none;">
<p></p>
  <p>
    XSLT file updated with success !
  </p>
</div>

<script>
Init();
</script>
{% endblock %}

